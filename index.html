<!DOCTYPE html>
<html>
<head>
	<title>BEYOND ADVERTISING</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link type="text/css" rel="stylesheet" href="main.css">
	<style>
		a {
			color: white;
		}

		#bar{
			color: rgba(255,255,255,255);
			background: black;
			outline: 1px solid white;
			border: 0px;
			padding: 5px 10px;
			cursor: pointer;
		}

		#menu {
			position: absolute;
			bottom: 20px;
			width: 100%;
			text-align: center;
		}

		.element {
			width: 480px;
			height: 360px;
			box-shadow: 0px 0px 12px rgba(255,255,255,255);
			border: 1px solid rgba(255,255,255,255);
			font-family: Monospace, sans-serif;
			text-align: center;
			line-height: normal;
			cursor: default;
			background-color: black;
		}

		/*.element:hover {*/
		/*	width: 70%;*/
		/*	height: 70%;*/
		/*	transform: scale(0);*/
		/*	transition: .3s ease;*/
		/*	transition-delay:0.5s;*/
		/*}*/

		/*.element:active{*/
		/*	position: absolute;*/
		/*	bottom: 0;*/
		/*	left: 0;*/
		/*	right: 0;*/
		/*	background-color: white;*/
		/*	overflow: hidden;*/
		/*	width: 100%;*/
		/*	height: 100%;*/
		/*	transform: scale(0);*/
		/*	transition: .3s ease;*/
		/*}*/

		.element .number {
			position: absolute;
			bottom: 40;
			left: 0;
			right: 0;
			width: 480px;
			height: 312px;
			opacity: 0.8;
		}

		/*.element:hover .number{*/
		/*	position: absolute;*/
		/*	width: 100%;*/
		/*	height: 100%;*/
		/*	transition: .3s ease;*/
		/*	transition-delay:0.5s;*/
		/*	opacity: 1;*/
		/*}*/

		.element .symbol {
			position: absolute;
			top: 40px;
			left: 0px;
			right: 0px;
			font-size: 20px;
			font-weight: bold;
			color: rgba(255,255,255,255);
			text-shadow: 0 0 10px rgba(255,255,255,255);
		}

		.element .details {
			position: absolute;
			bottom: 15px;
			left: 0px;
			right: 0px;
			font-size: 0px;
			color: rgba(255,255,255,255);
		}

		/*.element:hover .details {*/
		/*	position: absolute;*/
		/*	top: 35px;*/
		/*	left: 35px;*/
		/*	right: 1500px;*/
		/*	font-size: 30px;*/
		/*	color: rgba(255,255,255,255);*/
		/*	text-align: left;*/
		/*	transition: .3s ease;*/
		/*	transition-delay:0.5s;*/
		/*}*/

		.element .website {
			position: absolute;
			bottom: 0px;
			left: 0px;
			right: 0px;
			font-size: 20px;
			padding-top: 10px;
			padding-bottom: 10px;
			padding-left: 82px;
			padding-right: 82px;
			color: rgba(255,255,255,255);
			background-color: black;
		}

		.element .zoom {
			position: absolute;
			bottom: 0px;
			right: 0px;
			padding-top: 10px;
			padding-bottom: 10px;
			padding-left: 82px;
			padding-right: 82px;
			font-size: 20px;
			color: rgba(255,255,255,255);
			background-color: black;
		}

		button {
			color: rgba(255,255,255,255);
			background: transparent;
			outline: 1px solid white;
			border: 0px;
			padding: 5px 10px;
			cursor: pointer;
		}

		button:hover {
			background-color: red;
		}

		button:active {
			color: #000000;
			background-color: red;
		}

	</style>
</head>
<body>
<!--<div id="overlay">-->
<!--	<button id="startButton">ENTER THE ORBIT</button>-->
<!--</div>-->

<div id="info">
	Student heading towards your orbit
</div>
<div id="container"></div>
<div id="menu">
	<button id="sphere">OVERVIEW</button>
	<button id="table">ORBIT</button>
	<button onclick="window.location.href='about'">about</button>
</div>
<script type="module">

	import * as THREE from '../build/three.module.js';

	import { TWEEN } from './jsm/libs/tween.module.min.js';
	import { TrackballControls } from './jsm/controls/TrackballControls.js';
	import { CSS3DRenderer, CSS3DObject } from './jsm/renderers/CSS3DRenderer.js';

	const table = [
		"Laura Zampou",
		"Oaej0-49a9I",
		-3.75,
		1.5,
		"http://beyondadvertising.space/",

		"Susanne Broer",
		"JCW38tL_wHE",
		-3.75,
		4,
		"http://beyondadvertising.space/",

		"Lonneke den Haan",
		"LTtWMA3LwJw",
		-3.75,
		6.5,
		"http://beyondadvertising.space/",

		"Lumi Pulkkinen",
		"UhGBkZlAxEo",
		-3.75,
		9,
		"http://beyondadvertising.space/",

		"Doris Laging",
		"khudnn9kqnY",
		0,
		1.5,
		"http://beyondadvertising.space/",

		"Tatum Hekkert",
		"G05BNK3MOE0",
		0,
		4,
		"http://beyondadvertising.space/",

		"Femke Sannen",
		"ctieddQ_YuY",
		0,
		6.5,
		"http://beyondadvertising.space/",

		"Annemarijn Mulder",
		"aTLM4F641w0",
		0,
		9,
		"http://beyondadvertising.space/",

		"Jeske Maas",
		"7-j6blr8fag",
		3.75,
		1.5,
		"http://beyondadvertising.space/",

		"Pim Hermans",
		"qraOBwGgbYY",
		3.75,
		4,
		"http://beyondadvertising.space/",

		"Julia Heetman",
		"LE_uGCfn-Ik",
		3.75,
		6.5,
		"http://beyondadvertising.space/",

		"Berksun Doğaner",
		"xxx",
		3.75,
		9,
		"http://beyondadvertising.space/",

		"Willemijn Besteman",
		"fyI0Phx6LKU",
		7.5,
		1.5,
		"http://beyondadvertising.space/",

		"Jannes van Arkel",
		"-BWunouxycI",
		7.5,
		4,
		"http://beyondadvertising.space/",

		"Luke Vermeulen",
		"SIqZt4VgqD8",
		7.5,
		6.5,
		"http://beyondadvertising.space/",

		"Casey Voogt",
		"E_Id4Ix7nb4",
		7.5,
		9,
		"http://beyondadvertising.space/",

		"Huib Scholten",
		"4dKI4j141QI",
		11.25,
		1.5,
		"http://beyondadvertising.space/",

		"Joel van Rooij",
		"2HZrxHiTBqU",
		11.25,
		4,
		"http://beyondadvertising.space/",

		"Stella Matthes",
		"qHFL86CxQ1M",
		11.25,
		6.5,
		"http://beyondadvertising.space/",

		"Mariëlle Kuin",
		"awQtnPGK6A4",
		11.25,
		9,
		"http://beyondadvertising.space/",

		"Renske Heringa",
		"vZ_1HIRpckA",
		15,
		1.5,
		"http://beyondadvertising.space/",

		"Bodine Hekkert",
		"XwBIs52i3aM",
		15,
		4,
		"http://beyondadvertising.space/",

		"Emma van Hartevelt",
		"xxx",
		15,
		6.5,
		"http://beyondadvertising.space/",

		"Erik Dernee",
		"55JjOhpGBoU",
		15,
		9,
		"http://beyondadvertising.space/",

		"Hilde Bekers",
		"RphDLTys7uM",
		18.75,
		1.5,
		"http://beyondadvertising.space/",

		"Rosa Zwiers",
		"izU1_WVn-q8",
		18.75,
		4,
		"http://beyondadvertising.space/",

		"Mart Verschuren",
		"9hqkaROIgzo",
		18.75,
		6.5,
		"http://beyondadvertising.space/",

		"Theo Rekelhof",
		"J87SJ1mHrQk",
		18.75,
		9,
		"http://beyondadvertising.space/",

		"Bibi Manancourt",
		"AtDo2djoPvs",
		22.6,
		1.5,
		"http://beyondadvertising.space/",

		"Jurriaan Hendriks",
		"oBGGrD3RNLg",
		22.6,
		4,
		"http://beyondadvertising.space/",

		"Shéyna van den Heever",
		"Ran3BafwIgM",
		22.6,
		6.5,
		"http://beyondadvertising.space/",

		"Sophie Schellens",
		"d2JWaf_zjDM",
		22.6,
		9,
		"http://beyondadvertising.space/",


	];

	let camera, scene, renderer, rendererWebGL;
	let controls;

	const objects = [];
	const targets = { table: [], sphere: [] };

	// var startButton = document.getElementById( 'startButton' );
	// startButton.addEventListener( 'click', function () {
	//
	// 	init();
	// 	animate();
	//
	// }, false );

	init();
	animate();

	function init() {

		// var overlay = document.getElementById( 'overlay' );
		// overlay.remove();

		camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 );
		camera.position.z = 3300;

		scene = new THREE.Scene();

		// table

		for ( let i = 0; i < table.length; i += 5 ) {

			const element = document.createElement( 'div' );
			element.className = 'element';
			element.style.backgroundColor = 'rgba(0,0,0,' + ( Math.random() * 0.5 + 0 ) + ')';
			// element.addEventListener('click', function (){
			// 	window.location = 'students/' + table[i + 1];
			// });

			const number = document.createElement( 'iframe');
			number.className = 'number';
			// number.setAttribute('allowtransparency', 'true');
			number.src = [ 'https://www.youtube.com/embed/', table[ i + 1 ], '?rel=0' ].join( '' );
			// number.textContent = ( i / 4 ) + 1;
			element.appendChild( number );

			// const symbol = document.createElement( 'div' );
			// symbol.className = 'symbol';
			// symbol.textContent = table[ i ];
			// element.appendChild( symbol );

			const details = document.createElement( 'div' );
			details.className = 'details';
			// details.innerHTML = table[ i + 2 ];
			element.appendChild( details );

			const website = document.createElement('button');
			website.className = 'website';
			website.addEventListener('click', function (){
				window.location='students/' + table[i + 1];
			});
			website.textContent = 'view';
			element.appendChild( website );

			const zoom = document.createElement('button');
			zoom.className = 'zoom';
			zoom.addEventListener('click', function (){
				window.location= table[i + 4];
			});
			zoom.textContent = 'zoomlink';
			element.appendChild( zoom );

			const objectCSS = new CSS3DObject( element );
			objectCSS.position.x = Math.random() * 4000 - 2000;
			objectCSS.position.y = Math.random() * 4000 - 2000;
			objectCSS.position.z = Math.random() * 4000 - 2000;
			scene.add( objectCSS );

			objects.push( objectCSS );

			//

			const object = new THREE.Object3D();
			object.position.x = ( table[ i + 2 ] * 140 ) - 1330;
			object.position.y = - ( table[ i + 3 ] * 180 ) + 990;

			targets.sphere.push( object );

		}

		// sphere

		const vector = new THREE.Vector3();

		for ( let i = 0, l = objects.length; i < l; i ++ ) {

			const phi = Math.acos( - 1 + ( 2 * i ) / l );
			const theta = Math.sqrt( l * Math.PI ) * phi;

			const object = new THREE.Object3D();

			object.position.setFromSphericalCoords( 800, phi, theta );

			vector.copy( object.position ).multiplyScalar( 2 );

			object.lookAt( vector );

			targets.table.push( object );

		}

		// WebGL

		rendererWebGL = new THREE.WebGLRenderer( { alpha: true } );
		rendererWebGL.setPixelRatio( window.devicePixelRatio );
		rendererWebGL.setSize( window.innerWidth, window.innerHeight );
		container.appendChild( rendererWebGL.domElement );

		// CSS

		renderer = new CSS3DRenderer();
		renderer.setSize( window.innerWidth, window.innerHeight );
		document.getElementById( 'container' ).appendChild( renderer.domElement );
		renderer.domElement.style.position = 'absolute';
		renderer.domElement.style.top = 0;

		//

		controls = new TrackballControls( camera, renderer.domElement );
		controls.minDistance = 500;
		controls.maxDistance = 6000;
		controls.addEventListener( 'change', render );


		const buttonTable = document.getElementById( 'table' );
		buttonTable.addEventListener( 'click', function () {

			transform( targets.table, 2000 );
			controls.reset()
		}, false );

		const buttonSphere = document.getElementById( 'sphere' );
		buttonSphere.addEventListener( 'click', function () {

			transform( targets.sphere, 2000 );
			controls.reset()
		}, false );

		transform( targets.table, 2000 );

		//

		window.addEventListener( 'resize', onWindowResize, false );

		//

		var geometry = new THREE.SphereGeometry( 690, 32, 32 );
		var material = new THREE.ShaderMaterial({
			uniforms: {
				color1: {
					value: new THREE.Color("red")
				},
				color2: {
					value: new THREE.Color("purple")
				}
			},
			vertexShader: `
    varying vec2 vUv;

    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
    }
  `,
			fragmentShader: `
    uniform vec3 color1;
    uniform vec3 color2;

    varying vec2 vUv;

    void main() {

      gl_FragColor = vec4(mix(color1, color2, vUv.y), 1.0);
    }
  `
		});
		var sphere = new THREE.Mesh( geometry, material );
		scene.add( sphere );

	}

	function transform( targets, duration ) {

		TWEEN.removeAll();

		for ( let i = 0; i < objects.length; i ++ ) {

			const object = objects[ i ];
			const target = targets[ i ];

			new TWEEN.Tween( object.position )
					.to( { x: target.position.x, y: target.position.y, z: target.position.z }, Math.random() * duration + duration )
					.easing( TWEEN.Easing.Exponential.InOut )
					.start();

			new TWEEN.Tween( object.rotation )
					.to( { x: target.rotation.x, y: target.rotation.y, z: target.rotation.z }, Math.random() * duration + duration )
					.easing( TWEEN.Easing.Exponential.InOut )
					.start();

		}

		new TWEEN.Tween( this )
				.to( {}, duration * 2 )
				.onUpdate( render )
				.start();

	}

	function onWindowResize() {

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();

		renderer.setSize( window.innerWidth, window.innerHeight );

		render();

	}

	function animate() {

		requestAnimationFrame( animate );

		TWEEN.update();

		controls.update();

		// var time = Date.now() * 0.0004;
		//
		// scene.rotation.x = time;
		// scene.rotation.y = time * 0.7;

	}

	function render() {

		rendererWebGL.render( scene, camera );
		renderer.render( scene, camera );

	}

</script>
</body>
</html>
